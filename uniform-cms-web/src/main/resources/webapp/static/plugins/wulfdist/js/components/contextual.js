!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c),c}:a(jQuery)}(function(a){"use strict";function b(b){b.keyCode===s&&(c(b,!0),a(b.target).next("ul").find("li").children("a:not([disabled])").first().focus()),b.keyCode!==s&&b.keyCode!==r||(b.preventDefault(),b.stopPropagation())}function c(b,c){c=c||!1;var e=a(b.target).closest(".contextual-dropdown-toggle").next(".contextual-dropdown-menu");e.hasClass("open")?c||n(e,a(b.target),!1):(n(e,a(b.target),!0),d(e))}function d(b){var c=b.get(0).getBoundingClientRect().right,d=a(b).find(".contextual-dropdown-sub-menu").first();if(d[0]){var e=a(document).width(),f=d.width();c+f>e?b.addClass("sub-menu-pull-left"):b.removeClass("sub-menu-pull-left")}}function e(b){var c,d=b.target,e=a(a(d).closest("li")),f=a(d).closest("ul"),g=a(f),j=a(f).prev(".contextual-dropdown-toggle"),k=g.find(u.items).filter(function(b,c){return a(c).closest("ul")[0]===f[0]}),l=k.index(d),m=[r,s,p,q,o,t],n=b.keyCode;if(m.indexOf(n)!==-1){switch(g.closest(".sub-menu-pull-left")[0]&&(n=n===p?q:n===q?p:n),n){case p:if(g.hasClass("contextual-dropdown-sub-menu"))return void g.closest("li").find("a").first().trigger("focus");break;case r:c=l>-1?l-1:-1;break;case q:e.hasClass("contextual-has-sub-menu")&&(i(b),k=g.find(u.items),l=k.index(d),c=l<k.length-1?l+1:k.length-1);break;case s:c=l<k.length-1?l+1:k.length-1;break;case t:h(b);break;case o:if(e.hasClass("checkbox"))return;e.hasClass("contextual-has-sub-menu")?(i(b),k=g.find(u.items),l=k.index(d),c=l<k.length-1?l+1:k.length-1):h(b)}void 0!==c&&(c===-1?j.trigger("focus"):a(k[c]).trigger("focus")),b.preventDefault(),b.stopPropagation()}}function f(b){var c,d=a(b.target),e=d.closest(".contextual-btn-menu"),f=e.find(".btn"),g=f.index(d),i=[r,s,p,q,t];if(i.indexOf(b.keyCode)!==-1){switch(b.keyCode){case p:c=g>0?g-1:0;break;case q:c=g<f.length-1?g+1:f.length-1;break;case t:h(b)}void 0!==c&&a(f[c]).trigger("focus"),b.preventDefault(),b.stopPropagation()}}function g(b){var c=a(a(b.target).closest(".contextual-btn"));c.children(".btn").prop("disabled",!0),c.next(".contextual-btn-menu").addClass("open")}function h(b){var c=a(a(b.target).closest(".contextual-btn-menu")),d=a(c.find(".contextual-dropdown-toggle"));a(c.prev(".contextual-btn")).children(".btn").prop("disabled",!1),n(c,d,!1),n(c.find(".open"),c.find("[aria-pressed]"),!1)}function i(b){var c=a(a(b.target).closest(".contextual-has-sub-menu")),d=a(c.find(".contextual-dropdown-sub-menu").first());d[0]&&(d.css("top",c.position().top-8+"px"),n(d,a(b.target),!0))}function j(b){var c=a(a(b.target).closest(".contextual-has-sub-menu"));n(c.find(".contextual-dropdown-sub-menu"),c.find("a").first(),!1)}function k(b){var c=a(b.target).closest(".contextual-btn").next(".contextual-btn-menu").find("button");g(b),a(b.target).parent().prevAll().filter(b.relatedTarget).length?c.first().focus():c.last().focus()}function l(b){var c=a(b.target||b.srcElement),d=a(c.closest(".contextual-btn-menu"));c.closest(".contextual-dropdown-sub-menu")[0]&&m(b),d.length>0&&setTimeout(function(){0===d.find(":focus, :hover").length?h(b):c.hasClass("contextual-dropdown-toggle")&&c.siblings(".btn:focus")[0]&&n(d.find(".contextual-dropdown-menu"),c,!1)},50)}function m(b){var c=a(b.target||b.srcElement),d=a(c.closest(".contextual-dropdown-sub-menu")),e=d.closest(".contextual-has-sub-menu");d.length>0&&setTimeout(function(){0===d.find(":focus, :hover").length&&n(d,e.find("a").first(),!1)},50)}function n(a,b,c){c===!0?(a.addClass("open"),b.first().attr("aria-pressed",!0)):(a.removeClass("open"),b.first().attr("aria-pressed",!1))}var o=32,p=37,q=39,r=38,s=40,t=27,u={items:"a:visible:not([disabled]), [type=checkbox]:visible:not([disabled])"};a(document).on("keydown.wf.contextual.keyboard",".contextual-dropdown-toggle",b).on("keydown.wf.contextual.keyboard",".contextual-dropdown-menu li a, .contextual-dropdown-menu li [type=checkbox]",e).on("keydown.wf.contextual.keyboard",".contextual-btn-menu .btn",f).on("mouseleave.wf.contextual.mouse",".contextual-btn-menu",h).on("mouseover.wf.contextual.mouse",".contextual-btn",g).on("focusin.we.contextual.focus",".contextual-btn button",k).on("click.wf.contextual.mouse",".contextual-dropdown-toggle",c).on("click.wf.contextual.mouse",".contextual-btn-menu .btn:not(.contextual-dropdown-toggle)",h).on("click.wf.contextual.mouse",".contextual-dropdown-menu li:not(.contextual-has-sub-menu) a",h).on("click.wf.contextual.mouse",".contextual-dropdown-menu li.contextual-has-sub-menu a",i).on("blur.wf.contextual.focus",".contextual-btn-menu button, .contextual-btn-menu li a, .contextual-dropdown-menu li [type=checkbox]",l).on("mouseover.wf.contextual.mouse",".contextual-has-sub-menu",i).on("mouseleave.wf.contextual.mouse",".contextual-has-sub-menu",j)});