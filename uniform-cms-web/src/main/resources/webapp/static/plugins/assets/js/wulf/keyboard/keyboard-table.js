!function(a){"function"==typeof define&&define.amd?define(["jquery","./keyboard-core"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c,require("./keyboard-core")),c}:a(jQuery)}(function(a){"use strict";function b(b,c){var d=a(b.target);d.closest("table").find("td").each(function(){a(this).removeClass(c)}),d.is("td")&&(d.closest("table").hasClass("n-table-hover")?d.closest("tr").find("td").each(function(){a(this).addClass(c)}):d.addClass(c))}function c(b){var c=a(b.target);c.is("td")&&(b.preventDefault(),a(b.target).trigger("click"),c.find("input").length>0&&(c.find("input").focus(),c.find(".selectlist").length>0&&c.find("button").trigger("click"),c.find(".n-calendar").length>0&&c.find("button").focus()))}function d(b,c){var d=a(b.target);"text"!==d.attr("type")&&!d.is("td")&&!d.parent().parent().parent().hasClass("n-multicolumn-list")&&d.find(".n-calendar").length<=0&&(g(d),d=d.closest("td"));var e=f(d,b);!(e.length>0)||d.hasClass("n-inputfield")&&d.parent().hasClass("n-calendar")||(b.preventDefault(),d.closest("table").hasClass("n-table-hover")?(d.closest("tr").find("td").each(function(){a(this).removeClass(c)}),e.closest("tr").find("td").each(function(){a(this).addClass(c)})):(d.closest("table").hasClass("datepicker-calendar-days")||b.keyCode!==j&&b.keyCode!==k&&b.keyCode!==l&&b.keyCode!==m||"true"!==d.find(".datepicker").find(".dropdown-toggle").attr("aria-expanded")||d.find(".datepicker").find(".dropdown-toggle").trigger("click").blur(),d.removeClass(c),e.addClass(c)),d.hasClass("n-drillDown-item")||d.removeAttr("tabindex"),e.attr("tabindex",0),e.trigger("focus"));var h=e.closest(".n-table-scrollbar");a.wfKBCore.isScrollNeeded(h,e)&&a(h).mCustomScrollbar("scrollTo",e,{scrollInertia:0})}function e(b,c){var d=a(b.target);d.closest("table").not(".n-drilldown-table").find("td").removeAttr("tabindex"),d.parent().parent().parent().hasClass("n-multicolumn-list")&&a(".n-multicolumn-list tbody:not(.group) td, th, .n-multicolumn-list tbody.group").prop("tabIndex",0),d.closest(".n-table").find("td").each(function(){a(this).removeClass(c)})}function f(b,c){b.hasClass("n-inputfield")&&!b.parent().hasClass("n-calendar")&&(b=b.closest("td"));var d,e,f=a.wfKBCore.getAllVisibleSubItems(b.parent()),g=f.index(b);switch(c.keyCode){case n:if(c.shiftKey)if(g>0)g--;else{for(g=f.length-1,d=b.parent().prev();a.wfKBCore.isHiddenElement(d);)d=d.prev();f=a.wfKBCore.getAllVisibleSubItems(d)}else if(g<f.length-1)g++;else{for(g=0,e=b.parent().next();a.wfKBCore.isHiddenElement(e);)e=e.next();f=a.wfKBCore.getAllVisibleSubItems(e)}break;case j:g=g>0?g-1:0;break;case k:g=g<f.length-1?g+1:f.length-1;break;case l:for(d=b.parent().is(".n-multicolumn-list tbody tr:first-child")?b.parent().parent().prev().find("tr"):b.parent().prev();a.wfKBCore.isHiddenElement(d);)d=d.prev();f=d.length>0?a.wfKBCore.getAllVisibleSubItems(d):f;break;case m:for(e=b.hasClass("n-multicolumn-list-th")?b.parent().parent().next().find("tr:first-child"):b.parent().next();a.wfKBCore.isHiddenElement(e);)e=e.next();f=e.length>0?a.wfKBCore.getAllVisibleSubItems(e):f}return f.eq(g)}function g(a){a.closest("div").hasClass("selectlist")&&"true"===a.closest("div").find("button").attr("aria-expanded")&&a.closest("div").find("button").trigger("click")}var h=13,i=32,j=37,k=39,l=38,m=40,n=9;a.wfKBTable={tableKeyboardHandler:function(a){var f=[n,i,h,j,k,l,m],g="n-cell-selected";if(-1!==f.indexOf(a.which))switch(b(a,g),a.keyCode){case i:case h:c(a);break;case j:case k:case l:case m:d(a,g);break;case n:e(a,g)}},handleTableDirectionKeyAction:function(a,b){d(a,b)}}});