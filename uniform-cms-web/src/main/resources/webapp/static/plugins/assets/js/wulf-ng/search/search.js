!function(a){"function"==typeof define&&define.amd?define(["angular","../const/constants"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("angular"):require("angular")(b)),a(c,require("../var/constants")),c}:a(angular)}(function(a){var b=function(b,c,d,e){function f(){m.isOpen=!1}function g(b){if(m.type===j||m.type===k||m.type===l){var c=b.attr("class");c.indexOf("open")>-1?(b.removeClass("open"),m.isOpen=!1):(b.addClass("open"),m.isOpen=!0,a.element(d).find("body").one("click",i))}}function h(){return a.element(d).find("body .n-search.open")}function i(){var b=a.element(d).find("body .open a.dropdown-toggle");b&&b.length>0&&b.click()}var j="dropDown",k="clearDropDown",l="searchBtnDropDown",m=this;m.type||(m.type="standard"),m.isOpen=!1,m.updAndDown=function(c){var d=a.element(c.target).parent(),g=d.prev(),h=d.next();c.keyCode===b.UP?(1===g.length&&g.find("a")[0].focus(),c.preventDefault()):c.keyCode===b.DOWN?(1===h.length&&h.find("a")[0].focus(),c.preventDefault()):c.keyCode===b.ESC?(f(),c.preventDefault()):c.keyCode===b.SPACE&&(c.preventDefault(),c.stopPropagation(),e(function(){d.find("a").trigger("click")},0))},m.search=function(b){var c=a.element(b.target).parent().parent(),d=h();d.length>0&&d.not(c).removeClass("open"),g(c),b.preventDefault(),b&&b.stopPropagation()},m.clear=function(a){m.textValue="",h().removeClass("open"),a.stopPropagation(),a.preventDefault()},m.clearOnKeyDown=function(a){a.keyCode===b.ENTER||a.keyCode===b.SPACE?(m.textValue="",a.stopPropagation(),a.preventDefault()):a.keyCode===b.ESC&&a.target.blur()},m.handelKeyboard=function(c){var d=a.element(c.target);c.keyCode===b.ESC?a.element(c.target).parent().removeClass("open"):c.keyCode===b.SPACE||c.keyCode===b.ENTER?d.hasClass("dropdown-toggle")&&(c.preventDefault(),c.stopPropagation(),g(d.parent())):(c.keyCode===b.UP||c.keyCode===b.DOWN)&&(a.element(c.target).parent().find("ul>li>a:first")[0].focus(),c.preventDefault(),c.stopPropagation())},m.onTextInput=function(a){a.keyCode===b.ENTER&&this.onSubmitCallback&&this.onSubmitCallback()(a,m.textValue)},m.$onChanges=function(a){a.disable&&a.disable.currentValue&&(m.isOpen=!1)}};b.$inject=["WF-KEYCODE-CONST","$attrs","$document","$timeout"],a.module("wf.angular.search",["wf.angular.constants"]).component("wfSearch",{transclude:!0,templateUrl:"wf/ng-template/search/search.html",bindings:{textValue:"<",dropDownData:"<",disable:"<",type:"@",placeholder:"@",searchBtnText:"@",onSubmitCallback:"&",onItemSelectedCallback:"&"},controller:b})});